<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.howei.mapper.UsersMapper" >

    <resultMap id="userMap" type="com.howei.pojo.Users">
        <result column="Id" property="Id"></result>
        <result column="Name" property="Name"></result>
        <result column="UserName" property="UserName"></result>
        <result column="Password" property="Password"></result>
        <result column="Permissions" property="Permissions"></result>
        <result column="projectId" property="projectId"></result>
        <result column="roleId" property="roleId"></result>
        <result column="Sex" property="Sex"></result>
        <result column="Phone" property="Phone"></result>
        <result column="EMail" property="EMail"></result>
    </resultMap>

    <select id="findUser" resultType="com.howei.pojo.Users" parameterType="java.lang.String" resultMap="userMap">
        select * from users where UserName=#{param1} and Password=#{param2}
    </select>

    <select id="getPermission" resultType="java.lang.String" parameterType="int">
        select rolePermission.permissionId from role
        INNER JOIN rolePermission on role.id=rolePermission.roleId
        where rolePermission.permissionId in (68,69)
        and role.id=#{param1}
    </select>

    <select id="findById" resultMap="userMap" resultType="com.howei.pojo.Users" parameterType="java.lang.String">
        select * from users where id=#{id}
    </select>
</mapper>